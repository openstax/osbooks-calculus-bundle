# üßÆ MathML to LaTeX Converter (Note: README generated by Gemini)

This script processes a specified CNX collection XML file, identifies all associated modules (CNXML files), extracts MathML content from within those modules, and converts the MathML into LaTeX format using the `mathml-to-latex` library. The resulting LaTeX strings are then printed to the console.

## üöÄ Getting Started

### Prerequisites

You must have [Node.js](https://nodejs.org/) installed to run this script.

### Installation

1.  **Clone the Repository:** Ensure this script is within the correct project structure, likely where `collections` and `modules` directories exist relative to the script's location.
2.  **Install Dependencies:** Navigate to your project's root directory and run:

    ```bash
    npm install i
    ```

    *(Note: This assumes your project uses `package.json` and this script's dependencies are listed.)*

### Usage

```bash
node index.js
```

### Output

The script will read all MathML elements from the specified modules and print the converted LaTeX string for each one to the console.

Example output:

`\sum_{i=0}^{n} a_i x^i \int_0^1 f(x) dx \vec{F} = m \vec{a}`

## ‚öôÔ∏è Script Details

### Dependencies

* `node:fs`: Used for reading files (collection XML and CNXML modules).
* `node:path`: Used for resolving file paths.
* `xpath`: For querying XML documents using XPath expressions.
* `@xmldom/xmldom`: Used for parsing XML/HTML documents and serializing nodes.
* `mathml-to-latex`: The core library for converting MathML to LaTeX.

### Core Logic

1.  **Path Setup:** Determines the base directory (`repoRoot`) and the script's location (`here`).
2.  **Collection Loading:** The `getCollection` function reads and parses the collection XML file (default: `calculus-volume-3.collection.xml`).
3.  **Namespace Setup:** XPath namespaces (`col`, `m`, `c`) are defined for accurate querying of the collection and CNXML/MathML documents.
4.  **Module Identification:** An XPath expression `//col:module[@document]/@document` is used to select the file names of all modules referenced in the collection.
5.  **Module Processing:** The script iterates through each identified module path:
    * The CNXML file is read and parsed into a DOM.
    * All MathML nodes (`//m:math`) are selected using XPath.
    * Each MathML node is serialized to a string.
    * **Cleanup:** The script performs string replacements to remove the `xmlns:m` attribute and the redundant `m:` namespace prefixes, preparing the MathML for the converter.
    * **Conversion:** `MathMLToLaTeX.convert(serialized)` is called, and the resulting LaTeX string is logged.

## ‚úçÔ∏è Customization

### Change the Collection

You can change which collection file is processed by modifying the default value in the `getCollection` function call:

```javascript
// Before:
// const col = getCollection();

// After: To process a different collection:
const col = getCollection("my-other-book.collection.xml");

```

## Disclaimer

I have no idea how good the LaTeX generated by `mathml-to-latex` is.

## TODO

- You may want to map the math and/or module to the LaTeX.